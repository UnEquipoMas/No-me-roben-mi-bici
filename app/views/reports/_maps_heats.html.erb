<div>
  <div id="map" style='width: 100%; height: 500px;'></div>
</div>
<script type="text/javascript">
  var markers = [];
  var json_array = (<%=raw @hash.to_json%>);
  var handler = Gmaps.build('Google');
handler.buildMap({ internal: {id: 'map'}}, function(){
  var markers = handler.addMarkers([
    { lat: 43, lng: 3.5},
    { lat: 45, lng: 4},
    { lat: 47, lng: 3.5},
    { lat: 49, lng: 4},
    { lat: 51, lng: 3.5},
    { lat: 51, lng: 3.52},
    { lat: 51, lng: 3.51},
    { lat: 51, lng: 3.49},
    { lat: 51, lng: 3.53},
    { lat: 51, lng: 3.51}
  ]);
  handler.bounds.extendWith(markers);
  handler.fitMapToBounds();
});

</script>